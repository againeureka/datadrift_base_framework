# ddoc v2.0.1 릴리스 노트

## 릴리스 일자
2025-11-17

## 🚀 성능 및 개발자 경험 개선

ddoc v2.0.1은 성능 개선, 코드 구조화, 사용자 경험 향상에 중점을 둔 패치 릴리스입니다. v2.0.0과의 완전한 하위 호환성을 유지합니다.

## ⚡ 성능 개선

### CLI 시작 속도 (21배 향상!)
- **이전**: 도움말 명령 실행 시 4초 이상
- **이후**: 0.17-0.20초 ⚡
- **개선율**: **21배 빠름**
- **영향**: 명령어 탐색 및 발견이 즉시 가능

### 플러그인 목록 조회 최적화
- **이전**: 3.7초 (PyTorch 등 모든 플러그인 로드)
- **이후**: 0.17초 (메타데이터만 조회, 무거운 라이브러리 import 안 함)
- **개선율**: **21.8배 빠름**
- **방법**: 플러그인 로드 대신 `importlib.metadata` 사용

### 지연 로딩(Lazy Loading) 아키텍처
- 실제로 필요한 경우에만 플러그인 로드
- `init`, `add`, `snapshot`, `plugin list` 같은 명령은 무거운 의존성 로드 안 함
- 모든 사용자에게 더 빠른 시작 시간 제공

## 📁 코드 구조화

### CLI 모듈화
- **이전**: 단일 거대 파일 (2,767줄)
- **이후**: 11개의 모듈화된 파일 (평균 120줄)
- **구조**:
  ```
  ddoc/cli/commands/
  ├── Core v2.0
  │   ├── init.py (59줄)
  │   ├── add.py (77줄)
  │   └── snapshot.py (414줄)
  ├── analyze/ (eda.py, drift.py)
  ├── plugin.py, vis.py
  ├── utils.py
  └── legacy/ (v1.x 명령, 격리됨)
  ```

### 장점
- ✅ **유지보수 용이**: 각 명령이 독립된 파일
- ✅ **협업 개선**: 여러 개발자가 동시에 작업 가능
- ✅ **탐색 속도 향상**: 명령을 즉시 찾을 수 있음
- ✅ **명확한 분리**: v2.0 핵심 vs v1.x 레거시

### 레거시 코드 격리
- 모든 v1.x 명령을 `legacy/` 폴더로 이동
- 명확한 마이그레이션 경로 문서화
- v2.1에서 쉽게 제거 가능 (`legacy/` 폴더만 삭제)

## 🛠️ 버그 수정 및 개선

### 압축 파일 해제 수정
- **문제**: 압축 해제 시 이중 중첩 폴더 생성
  - 예: `data/yolo_reference/yolo_reference/train/`
- **해결**: 단일 폴더 아카이브 자동 평탄화
  - 결과: `data/yolo_reference/train/` ✅
- **추가**: `__MACOSX` 메타데이터 폴더 자동 제거

### showcmd 명령 개선
- **제거**: 모든 deprecated v1.x 명령 표시 제거
- **추가**: 스냅샷 하위 명령 상세 시각화
- **업데이트**: v2.0 스타일 사용 예제
- **성능**: 0.3초 (플러그인 로드 안 함)

## 📊 통계

| 지표 | v2.0.0 | v2.0.1 | 개선율 |
|------|--------|--------|--------|
| CLI 도움말 속도 | 4.0초 | 0.19초 | **21배** ⚡ |
| 플러그인 목록 속도 | 3.7초 | 0.17초 | **21.8배** ⚡ |
| 최대 파일 크기 | 2,767줄 | 414줄 | **85% 감소** |
| 평균 파일 크기 | 2,767줄 | ~120줄 | **96% 감소** |
| 핵심 모듈 수 | 1개 파일 | 11개 파일 | 구조 개선 |

## 🔧 기술 상세

### 지연 로딩 구현
```python
# main.py: 필요할 때만 플러그인 로드
plugin_dependent_commands = {'analyze', 'exp', 'vis'}
# 'plugin', 'init', 'add', 'snapshot' 제외
```

### 아카이브 평탄화 로직
```python
# file_service.py: 중첩 폴더 자동 감지 및 평탄화
def _flatten_single_folder(extract_dir, expected_name):
    # 아카이브에 같은 이름의 단일 폴더만 있으면
    # 내용물을 한 레벨 위로 이동
```

### 모듈 구조
- **핵심 명령**: `init.py`, `add.py`, `snapshot.py`
- **분석**: `analyze/eda.py`, `analyze/drift.py`
- **시스템**: `plugin.py`, `vis.py`
- **유틸리티**: `utils.py` (공통 헬퍼 함수)
- **레거시**: `legacy/full.py` (v1.x, v2.1에서 제거 예정)

## 📝 마이그레이션 노트

### 호환성 유지
- ✅ 모든 v2.0.0 명령이 동일하게 작동
- ✅ 모든 v1.x 레거시 명령 여전히 사용 가능 (숨김 처리)
- ✅ 설정 변경 불필요

### 개발자를 위해
- 새로운 모듈 구조로 기여가 더 쉬워짐
- 각 명령 파일이 독립적으로 구성됨
- v2.0과 레거시 코드 간 명확한 분리

## 🎯 향후 계획

### v2.1 예정 사항
- `legacy/` 폴더 완전 제거
- 실험 명령 모듈화
- 추가 성능 최적화

## 🙏 감사의 말

이번 릴리스는 개발자 경험과 성능에 중점을 두어, ddoc을 모든 사용자에게 더 빠르고 유지보수하기 쉽게 만듭니다.

---

**전체 변경 이력**: v2.0.0과 v2.0.1 사이의 git log 참조
